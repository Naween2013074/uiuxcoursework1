<html lang="en">
    <head>
        <meta charset="utf-8">
        <meta http-equiv="X-UA-Compatible" content="IE=edge">
        <meta name="viewport" content="width=device-width, initial-scale=1">
        <!-- The above 3 meta tags *must* come first in the head; any other head content must come *after* these tags -->
        <title>Puzzle Game</title>

        <!-- Bootstrap -->
        <!--        <script src="resources/libs/bootstrap/js/bootstrap.min.js"></script>-->
        <script src="resources/libs/jQuery/js/jquery.3.1.1.min.js"></script>
        <script src="resources/libs/bootstrap/js/bootstrap.min.js"></script>
        <script src="resources/libs/jQuery/js/jquery-latest.js"></script>
        <script src="resources/libs/jQuery/js/jquery-ui.min.js"></script>
        <script src="resources/libs/bootstrap/js/bootstrap.min.js"></script>
        <script src="resources/libs/flexslider/js/jquery.flexslider.js"></script>
        <link href="resources/libs/bootstrap/css/bootstrap.min.css" rel="stylesheet">
        <link rel="stylesheet" href="resources/css/booking-nearest-pub.css">        
        <link rel="stylesheet" type="text/css" href="resources/libs/jquery-mobile/jquery.mobile-1.4.5.min.css">
        <link rel="stylesheet" type="text/css" href="resources/css/style.css">
        <link rel="stylesheet" type="text/css" href="resources/libs/puzzlegame/jquery.snap-puzzle.css">
        <link rel="stylesheet" href="https://cdn.rawgit.com/yahoo/pure-release/v0.6.0/grids-responsive-min.css">
        <link type="text/css" rel="stylesheet" href="resources/libs/font-awesome/css/font-awesome.min.css" >
        <link rel="stylesheet" type="text/css" href="resources/libs/mmenu/css/jquery.mmenu.all.css">
        <script src="resources/libs/jquery-mobile/jquery.mobile-1.4.5.min.js"></script>   
        <script src="https://ajax.googleapis.com/ajax/libs/jquery/1.11.1/jquery.min.js"></script>
        <script src="https://ajax.googleapis.com/ajax/libs/jqueryui/1.11.2/jquery-ui.min.js"></script>
        <script src="resources/libs/puzzlegame/jquery.snap-puzzle.js"></script>
        <script src="resources/libs/mmenu/js/jquery.mmenu.all.min.js"></script>

        <script>
            var totalPoints = 0;
            var difficultLevel = 2;
        </script>


        <style>
            th, td {
                /*                border: 1px solid black;*/
                padding: 10px;                
                table-layout:fixed;
            }
            #tb-one{
                width: 50%;
            }
            #tb-two{
                width: 50%;
            }
            img {
                display: block;
                margin: 0 auto;
                max-width: 100%;
                max-height: 50%;

            }
            h2{
                color: white;
                text-shadow: 3px 2px #000000;
            }
            p{
                color: white;
                text-shadow: 3px 2px #000000;
            }
            #tabs  {
                background: #434343;                
                padding: 10px;
            }
            #one {
                background: #434343;
            }
            #two {
                background: #434343;
            }
            #two-normal {
                background: #434343;
            }
            #oneone{
                background: #434343;
            }
            body{
                background: #434343;
            }
            .ui-page { 
                background:#434343;
            }


        </style>
    </head>
    <body>
        <div id="page">
            <div class="header">
                <a href="#menu"><span></span></a>
            </div>
            <nav id="menu">
                <ul>
                   <li><a href="drinks.php">Drinks</a></li>
                    <li><a href="#">Food</a></li>
                    <li><a href="treasure_hunt.php">Pub Games</a></li>
                    <li><a href="booking_nearest_pub.php">Booking</a></li>
                    <li><a href="#">Pub Locator</a></li>
                    <li><a href="about_us.php">About Us</a></li>
                    <li><a href="#">Leaderboard</a></li>
                    <li><a href="#">Statics</a></li>
                    <li><a href="#">Profile</a></li>
                    <li><a href="treasure_hunt.php">Treasure Hunt</a></li>
                </ul>
            </nav>
            <a href="index.php" class="main-logo"><img  alt="image" src="resources/images/home/beer.png"></a>
            <a href="#" class="place"><img alt="image" src="resources/images/home/place.png"></a>
            <a href="#" class="login"><img  alt="image" src="resources/images/home/login.png"></a>
            <a href="booking_nearest_pub.php" class="book"><img  alt="image" src="resources/images/home/book.png"  ></a>
            <a href="drinks.php" class="drink"><img  alt="image" src="resources/images/home/drink.png"></a>
            <a href="treasure_hunt.php" class="th"><img  alt="image" src="resources/images/home/th.png"></a>
        </div>

        <div class="row">
            <h1 class="display-3">Puzzle Game</h1>
        </div>

        <div class=" alert alert-success" 
             style="color: blue; font-size: 20px ; margin:10px 10px 10px 10px; text-align: center"  id="puzzle_e"> <a href="#" class="pure-button button-lg restart-puzzle" data-grid="2">Easy</a>
        </div>
        <div class=" alert alert-warning" 
             style="color: blue; font-size: 20px ; margin:10px 10px 10px 10px; text-align: center"  id="puzzle_m"> <a href="#" class="pure-button button-lg restart-puzzle" data-grid="3">Medium</a>
        </div>
        <div class=" alert alert-danger" 
             style="color: blue; font-size: 20px ; margin:10px 10px 10px 10px; text-align: center"  id="puzzle_d"> <a href="#" class="pure-button button-lg restart-puzzle" data-grid="5">Difficult</a>
        </div>

        <div id="puzzle-containment" style="border-top: 1px solid #eee;border-bottom:1px solid #434343;margin:30px 0;padding:10px;text-align:center">
            <div class="pure-g" style="max-width:1280px;margin:auto">
                <div class="pure-u-1 pure-u-md-1-2"><div style="margin:10px">
                        <img id="source_image" class="pure-img" src="resources/images/puzzlegame/puzzlegame1.jpg">
                    </div></div>
                <div class="pure-u-1 pure-u-md-1-2">
                    <div id="pile" style="margin:10px">
                        <div id="puzzle_solved" style="display:none;text-align:center;position:relative;top:25%">
                            <br><br>
                        </div>
                        <div class="" 
                             style="color: white; font-size: 25px ; margin:10px 10px 10px 10px; text-align: center"  id="successMsg" hidden="true"><p> Well Done !!!</p> <p>Successfully Completed the puzzle game</p>
                        </div>

                        <div class="" 
                             style="color: yellow; font-size: 25px ; margin:10px 10px 10px 10px; text-align: center"  id="pointsMsg" hidden="true">
                        </div>
                        <div style="display:none;" id="back_to_treasure_hunt_btn">
                            <button type="button" id="back_to_treasure_hunt_btn" onclick="window.location = 'treasure_hunt.php';"class="btn btn-primary btn-lg">Back To Treasure Hunt</button>
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <script>

            var totalPoints = 0;
            var difficultLevel = 2;

            // jQuery UI Touch Punch 0.2.3 - must load after jQuery UI
            // enables touch support for jQuery UI
            !function (a) {
                function f(a, b) {
                    if (!(a.originalEvent.touches.length > 1)) {
                        a.preventDefault();
                        var c = a.originalEvent.changedTouches[0], d = document.createEvent("MouseEvents");
                        d.initMouseEvent(b, !0, !0, window, 1, c.screenX, c.screenY, c.clientX, c.clientY, !1, !1, !1, !1, 0, null), a.target.dispatchEvent(d)
                    }
                }
                if (a.support.touch = "ontouchend"in document, a.support.touch) {
                    var e, b = a.ui.mouse.prototype, c = b._mouseInit, d = b._mouseDestroy;
                    b._touchStart = function (a) {
                        var b = this;
                        !e && b._mouseCapture(a.originalEvent.changedTouches[0]) && (e = !0, b._touchMoved = !1, f(a, "mouseover"), f(a, "mousemove"), f(a, "mousedown"))
                    }, b._touchMove = function (a) {
                        e && (this._touchMoved = !0, f(a, "mousemove"))
                    }, b._touchEnd = function (a) {
                        e && (f(a, "mouseup"), f(a, "mouseout"), this._touchMoved || f(a, "click"), e = !1)
                    }, b._mouseInit = function () {
                        var b = this;
                        b.element.bind({touchstart: a.proxy(b, "_touchStart"), touchmove: a.proxy(b, "_touchMove"), touchend: a.proxy(b, "_touchEnd")}), c.call(b)
                    }, b._mouseDestroy = function () {
                        var b = this;
                        b.element.unbind({touchstart: a.proxy(b, "_touchStart"), touchmove: a.proxy(b, "_touchMove"), touchend: a.proxy(b, "_touchEnd")}), d.call(b)
                    }
                }
            }(jQuery);

            function start_puzzle(x) {
                $('#puzzle_solved').hide();
                $('#source_image').snapPuzzle({
                    rows: x, columns: x,
                    pile: '#pile',
                    containment: '#puzzle-containment',
                    onComplete: function () {
                        $('#back_to_treasure_hunt_btn').show();
                        $('#puzzle_e').hide();
                        $('#puzzle_m').hide();
                        $('#puzzle_d').hide();
                        $('#successMsg').show();
                        document.getElementById("pointsMsg").innerHTML = difficultLevel + " Points added ";
                        $('#pointsMsg').show();
                        $('#source_image').fadeOut(150).fadeIn();

                    }
                });
            }

            $(function () {
                $('#pile').height($('#source_image').height());
                start_puzzle(3);

                $('.restart-puzzle').click(function () {
                    $('#successMsg').hide();
                    $('#puzzle_solved').hide();
                    $('#source_image').snapPuzzle('destroy');

                    difficultLevel = $(this).data('grid') * 10;
                    start_puzzle($(this).data('grid'));

                    console.log($(this).data('grid'));
                });

                $(window).resize(function () {
                    $('#pile').height($('#source_image').height());
                    $('#source_image').snapPuzzle('refresh');
                });
            });


            // if (~window.location.href.indexOf('http')) {
            //     (function() {var po = document.createElement('script'); po.type = 'text/javascript'; po.async = true;po.src = 'https://apis.google.com/js/plusone.js';var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(po, s);})();
            //     (function(d, s, id) {var js, fjs = d.getElementsByTagName(s)[0];if (d.getElementById(id)) return;js = d.createElement(s); js.id = id;js.src = "//connect.facebook.net/en_US/sdk.js#xfbml=1&version=v2.4&appId=114593902037957";fjs.parentNode.insertBefore(js, fjs);}(document, 'script', 'facebook-jssdk'));
            //     !function(d,s,id){var js,fjs=d.getElementsByTagName(s)[0],p=/^http:/.test(d.location)?'http':'https';if(!d.getElementById(id)){js=d.createElement(s);js.id=id;js.src=p+'://platform.twitter.com/widgets.js';fjs.parentNode.insertBefore(js,fjs);}}(document, 'script', 'twitter-wjs');
            //     $('#github_social').html('\
            //         <iframe style="float:left;margin-right:15px" src="//ghbtns.com/github-btn.html?user=Pixabay&repo=jQuery-snapPuzzle&type=watch&count=true" allowtransparency="true" frameborder="0" scrolling="0" width="110" height="20"></iframe>\
            //         <iframe style="float:left;margin-right:15px" src="//ghbtns.com/github-btn.html?user=Pixabay&repo=jQuery-snapPuzzle&type=fork&count=true" allowtransparency="true" frameborder="0" scrolling="0" width="110" height="20"></iframe>\
            //     ');
            // }
        </script>
        <script type="text/javascript">
            $(function () {
                $('nav#menu').mmenu();
            });
        </script>

    </body>
</html>